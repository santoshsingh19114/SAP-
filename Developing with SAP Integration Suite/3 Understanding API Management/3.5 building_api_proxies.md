# Building API Proxies

## Objective
After completing this lesson, you will be able to create an API based on an API provider and understand all possible ways to build an API Proxy in SAP API Management.

---

# 1. What Is an API Proxy?
An API Proxy is a representation of an API inside SAP Integration Suite. It sits between the backend system and the consumer application.

### Responsibilities of an API Proxy
- **Security**: Enforces authentication, authorization, quota, rate limiting.
- **Scalability**: Handles load, caching, routing.
- **Flexibility**: Transforms requests/responses, modifies headers, aggregates data.
- **Monitoring**: Provides analytics, logs, performance insights.
- **Revisioning**: Manages API versions while keeping backward compatibility.

### Supported Service Types
- **REST**
- **OData**
- **SOAP**

---

# 2. Ways to Create an API Proxy
API Proxies can be created in multiple ways:

### **A. Using the Create Button**
You can create an API Proxy using:
1. **API Provider** (most common)
2. **URL**
3. **API Proxy (copy existing)**

### **B. Using Menu Links**
1. **Create in API Designer** (openAPI YAML editor)
2. **Import API Proxy** (`.zip` / `.json`)

---

# 3. API Proxy Creation Options Explained

## **3.1 Create API Proxy Using API Provider**
This is the standard approach when you already have a system connected as an API Provider.

### Steps
1. Go to **Design → APIs**.
2. Click **Create**.
3. Choose **API Provider**.
4. Select the desired API Provider (e.g., `SAPGatewayDemoSystemES5_Provider`).
5. Click **Discover** to display available services.
6. Select one service from the catalog.
7. System auto-fills metadata such as:
   - Host
   - Service Type (OData/REST/SOAP)
8. Click **Create**.
9. Deploy the API Proxy.

### Notes
- Only **one service** can be selected.
- Service Type is auto-detected from the backend.
- After deployment, the proxy is available for testing.

---

## **3.2 Create API Proxy Using URL**
Use this when no API Provider is configured.

### Steps
1. Go to **Design → APIs → Create**.
2. Select **URL**.
3. Manually enter:
   - Backend URL
   - Name, Title, Base Path
   - Service Type (REST or SOAP only)
4. Save and deploy the proxy.

### Notes
- Service Type must be **REST** or **SOAP**.
- All details must be entered manually.

---

## **3.3 Create API Proxy by Copying an Existing API Proxy**
This is used when you want to reuse or extend an existing API.

### Steps
1. Go to **Design → APIs**.
2. Select an existing API.
3. Choose **Create → API Proxy**.
4. Enter details manually.

### Notes
- Even if the original API is OData, the copied version can only be **REST** or **SOAP**.

---

# 4. Create API Proxy Using API Designer
This option allows creating APIs using an OpenAPI Specification.

### Steps
1. Choose **Create in API Designer** from menu.
2. The OpenAPI YAML/JSON editor opens.
3. Write the API definition manually.
4. Save → the system auto-updates the server URL.
5. Deploy the API.

### Notes
- Service Type = **REST only**.
- Everything must be manually defined (paths, servers, schemas).

---

# 5. Import an External API Proxy
Use this when you have an exported API.

### Steps
1. Go to **Design → APIs**.
2. Choose **Import API Proxy**.
3. Upload a `.zip` or `.json` file.
4. The service type is inherited from the imported file.

---

# 6. Component Flow (Text-Based Diagram)
```
API Provider → API (Proxy) → API Designer
               ↓            ↓
               URL          Import (.zip/.json)
               ↓
               API Proxy (copy)
```

**Types of API Providers:**
- Internet
- On-Prem
- Cloud Integration
- Open Connectors

---

# 7. Proxy & Target Endpoints

### **Proxy Endpoint**
- Handles inbound request from the client.
- Defines Base Path, policies, and routing logic.

### **Target Endpoint**
- Connects to backend service.
- Forwards request after any applied policies.

---

# 8. Summary
You can create an API Proxy in several ways:

### **Using Create button**
- API Provider (recommended)
- URL
- API Proxy (copy existing)

### **Using Menu Links**
- Create in API Designer (OpenAPI definition)
- Import API Proxy (`.zip` / `.json`)

API Proxies provide abstraction, scalability, and security between backend and consumer applications.

---

# 9. 4W & 1H Framework

| **4W & 1H** | **Description** |
|------------|-----------------|
| **What** | An API Proxy is an abstraction layer that exposes backend systems securely and uniformly to consumers. |
| **When** | When you need to expose, secure, transform, manage, or monitor backend services through API Management. |
| **Where** | SAP Integration Suite → API Management → Design → APIs. |
| **Why** | To ensure security, scalability, flexibility, monitoring, analytics, and version management of backend services. |
| **How** | By creating API Proxies using API Provider, URL, copying existing proxy, API Designer (OpenAPI), or importing (`.zip` / `.json`). |

# Trainer
https://learnsap.enable-now.cloud.sap/pub/mmcp/index.html?show=project!PR_77D25A5069B9D6B3:uebung#2

